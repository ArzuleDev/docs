---
title: "CLI Reference"
description: "Command-line tools for viewing, analyzing, and serving traces"
---

The Arzule SDK includes a CLI for working with local trace files during development, as well as a self-hosted server for receiving traces.

## Installation

The CLI is included with the SDK:

```bash
pip install arzule-ingest
```

For self-hosted server capabilities:

```bash
pip install arzule-ingest[server]
```

Verify installation:

```bash
arzule --help
```

## Commands

### `arzule view`

Display traces from a JSONL file.

```bash
arzule view <file> [options]
```

#### Options

| Option | Description |
|--------|-------------|
| `-f, --format` | Output format: `timeline` (default), `table`, `json` |
| `--run-id` | Filter to a specific run ID |
| `--event-type` | Filter by event type pattern |

#### Examples

```bash
# Timeline view (default)
arzule view traces.jsonl

# Table format
arzule view traces.jsonl -f table

# JSON output (for piping to other tools)
arzule view traces.jsonl -f json

# Filter by run
arzule view traces.jsonl --run-id abc123

# Filter by event type
arzule view traces.jsonl --event-type "tool.*"
```

#### Timeline output

```
Run: 550e8400-e29b-41d4-a716-446655440000
Started: 2025-12-24T10:30:00.000Z

10:30:00.000  run.start
10:30:00.100  crew.kickoff.start
10:30:00.150  ├── agent.execution.start [Researcher]
10:30:00.200  │   ├── llm.call.start
10:30:01.500  │   └── llm.call.end (1.3s)
10:30:01.600  │   ├── tool.call.start [WebSearch]
10:30:02.100  │   └── tool.call.end (0.5s)
10:30:02.200  └── agent.execution.complete
10:30:02.300  crew.kickoff.complete

Duration: 2.3s | Events: 10
```

#### Table output

```
| Timestamp           | Event Type              | Agent      | Status |
|---------------------|-------------------------|------------|--------|
| 10:30:00.000        | run.start               | -          | ok     |
| 10:30:00.100        | crew.kickoff.start      | -          | ok     |
| 10:30:00.150        | agent.execution.start   | Researcher | ok     |
| 10:30:00.200        | llm.call.start          | Researcher | -      |
| 10:30:01.500        | llm.call.end            | Researcher | ok     |
```

### `arzule stats`

Show statistics for a trace file.

```bash
arzule stats <file>
```

#### Output

```
Trace Statistics: traces.jsonl
==============================

Runs:           3
Total Events:   847
Time Range:     2025-12-24T10:00:00Z to 2025-12-24T11:30:00Z

Events by Type:
  run.start                  3
  run.end                    3
  crew.kickoff.start         3
  crew.kickoff.complete      3
  agent.execution.start     12
  agent.execution.complete  12
  tool.call.start           45
  tool.call.end             45
  llm.call.start           180
  llm.call.end             180

Agents:
  Researcher    245 events
  Writer        312 events
  Reviewer      290 events

Average Run Duration: 4m 32s
Average Events/Run:   282
```

### `arzule validate`

Validate that a trace file conforms to the schema.

```bash
arzule validate <file>
```

#### Output

```
Validating: traces.jsonl

Checked 847 events
Schema version: trace_event.v0_1
Status: VALID

No errors found.
```

Or with errors:

```
Validating: traces.jsonl

Checked 847 events
Status: INVALID

Errors:
  Line 234: Missing required field 'trace_id'
  Line 567: Invalid event_type 'unknown.event'

2 errors found.
```

## Self-Hosted Server

The `arzule-server` command starts a minimal HTTP server for receiving and storing traces locally. This is ideal for air-gapped environments, local development, or when you want full control over your trace data.

### `arzule-server`

Start the self-hosted trace server.

```bash
arzule-server [options]
```

#### Options

| Option | Default | Description |
|--------|---------|-------------|
| `-H, --host` | `127.0.0.1` | Host to bind to |
| `-p, --port` | `8080` | Port to listen on |
| `-s, --storage` | `./traces` | Storage directory for trace files |
| `--reload` | - | Enable auto-reload for development |
| `-w, --workers` | `1` | Number of worker processes |

#### Examples

```bash
# Start with defaults (localhost:8080)
arzule-server

# Bind to all interfaces on port 9000
arzule-server --host 0.0.0.0 --port 9000

# Custom storage directory
arzule-server --host 0.0.0.0 --port 8080 --storage /data/traces

# Development mode with auto-reload
arzule-server --reload

# Production with multiple workers
arzule-server --host 0.0.0.0 --port 8080 --workers 4
```

### Server Endpoints

The self-hosted server exposes the following HTTP endpoints:

| Method | Endpoint | Description |
|--------|----------|-------------|
| `POST` | `/ingest` | Receive and store trace events |
| `GET` | `/health` | Health check endpoint |
| `GET` | `/runs` | List all stored runs |
| `GET` | `/runs/{run_id}` | Get events for a specific run |
| `GET` | `/runs/{run_id}/timeline` | Get timeline view for a run |
| `DELETE` | `/runs/{run_id}` | Delete a specific run |

#### Ingest endpoint

```bash
curl -X POST http://localhost:8080/ingest \
  -H "Content-Type: application/json" \
  -d '{"trace_id": "abc123", "event_type": "run.start", ...}'
```

#### Health check

```bash
curl http://localhost:8080/health
# {"status": "healthy", "version": "0.1.0"}
```

#### List runs

```bash
curl http://localhost:8080/runs
# {"runs": [{"run_id": "abc123", "started_at": "...", "event_count": 42}, ...]}
```

### Docker Deployment

Deploy the self-hosted server using Docker for production environments.

#### Dockerfile

```dockerfile
FROM python:3.11-slim

WORKDIR /app

RUN pip install arzule-ingest[server]

EXPOSE 8080

VOLUME /data/traces

CMD ["arzule-server", "--host", "0.0.0.0", "--port", "8080", "--storage", "/data/traces", "--workers", "4"]
```

#### Build and run

```bash
# Build the image
docker build -t arzule-server .

# Run the container
docker run -d \
  --name arzule-server \
  -p 8080:8080 \
  -v /path/to/traces:/data/traces \
  arzule-server
```

#### Docker Compose

```yaml
version: "3.8"

services:
  arzule-server:
    build: .
    ports:
      - "8080:8080"
    volumes:
      - trace-data:/data/traces
    environment:
      - ARZULE_LOG_LEVEL=info
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8080/health"]
      interval: 30s
      timeout: 10s
      retries: 3

volumes:
  trace-data:
```

### Connecting to the server

Configure your SDK to send traces to the self-hosted server:

```python
from arzule_ingest import ArzuleTracer

tracer = ArzuleTracer(
    endpoint="http://localhost:8080/ingest",
    # No API key required for self-hosted
)
```

Or via environment variables:

```bash
export ARZULE_ENDPOINT=http://localhost:8080/ingest
export ARZULE_API_KEY=  # Leave empty for self-hosted
```

### `arzule-hook`

Lightweight entry point for Claude Code hooks. This command is used internally by the SDK when integrating with Claude Code's hook system.

```bash
arzule-hook [hook-data]
```

<Note>
This command is typically not invoked directly. It is registered as a hook handler and called automatically by Claude Code during code generation sessions.
</Note>

## Piping and scripting

The CLI works well with Unix pipes:

```bash
# Count events by type
arzule view traces.jsonl -f json | jq '.event_type' | sort | uniq -c

# Extract specific run
arzule view traces.jsonl -f json --run-id abc123 > run_abc123.json

# Filter tool calls
arzule view traces.jsonl -f json | jq 'select(.event_type | startswith("tool."))'
```

## Environment variables

| Variable | Description |
|----------|-------------|
| `ARZULE_CLI_COLOR` | Enable/disable colored output (`true`/`false`) |
| `ARZULE_CLI_PAGER` | Pager program for long output (default: `less`) |

## Next steps

<CardGroup cols={2}>

<Card title="Self-Hosting Guide" icon="server" href="/sdk/python/self-hosting">
  Deploy your own trace server.
</Card>

<Card title="Sinks" icon="database" href="/sdk/python/sinks">
  Write traces to local files.
</Card>

<Card title="Quickstart" icon="rocket" href="/quickstart">
  Get started with trace collection.
</Card>

<Card title="Claude Code Integration" icon="code" href="/sdk/python/claude-code">
  Integrate with Claude Code hooks.
</Card>

</CardGroup>