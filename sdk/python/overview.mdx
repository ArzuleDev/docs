---
title: "Python SDK Overview"
description: "Reference documentation for the Arzule Python SDK"
---

The `arzule-ingest` package provides everything you need to capture traces from your Python-based AI agents.

## Installation

```bash
pip install arzule-ingest
```

This includes all framework integrations (CrewAI, LangChain, AutoGen) and SOC2 compliance features by default.

## Core API

### `arzule_ingest.init()`

Initialize the SDK with automatic instrumentation. The SDK supports multiple deployment modes for different use cases.

#### Parameters

| Parameter | Type | Description |
|-----------|------|-------------|
| `api_key` | `str` | API key for cloud/selfhosted modes. Defaults to `ARZULE_API_KEY` env var |
| `tenant_id` | `str` | Tenant identifier. Defaults to `ARZULE_TENANT_ID` env var |
| `project_id` | `str` | Project identifier. Defaults to `ARZULE_PROJECT_ID` env var |
| `mode` | `str` | Deployment mode: `"cloud"`, `"local"`, `"selfhosted"`, or `"multi"` |
| `endpoint` | `str` | Custom endpoint URL for selfhosted mode |
| `auth_type` | `str` | Authentication type for selfhosted: `"bearer"`, `"basic"`, `"header"`, `"none"` |
| `auth_value` | `str` | Authentication token or value for selfhosted mode |
| `output_path` | `str` | Local file path for local mode storage |
| `destinations` | `list` | List of destination configs for multi mode |
| `redact_secrets` | `bool` | Enable PII redaction (default: `False`) |
| `batch_size` | `int` | Events per batch (default: `100`) |

#### Cloud Mode (Default)

Send traces to the Arzule cloud platform:

```python
import arzule_ingest

arzule_ingest.init(
    api_key="...",       # Optional: defaults to ARZULE_API_KEY env var
    tenant_id="...",     # Optional: defaults to ARZULE_TENANT_ID env var
    project_id="...",    # Optional: defaults to ARZULE_PROJECT_ID env var
    redact_secrets=True, # Optional: enable PII redaction
    batch_size=100,      # Optional: events per batch
)

# Or explicitly specify cloud mode
arzule_ingest.init(
    mode="cloud",
    api_key="arz_your_api_key",
)
```

#### Local Mode

Store traces locally without any network calls:

```python
import arzule_ingest

arzule_ingest.init(
    mode="local",
    output_path="./traces/my_traces.jsonl",  # Local file path
    redact_secrets=True,                      # Optional: still redacts PII
)
```

#### Self-Hosted Mode

Send traces to your own Arzule server deployment:

```python
import arzule_ingest

arzule_ingest.init(
    mode="selfhosted",
    endpoint="https://arzule.internal.company.com/ingest",
    auth_type="bearer",           # Options: bearer, basic, header, none
    auth_value="your_auth_token",
    tenant_id="my-tenant",
    project_id="my-project",
)

# With basic auth
arzule_ingest.init(
    mode="selfhosted",
    endpoint="https://arzule.internal.company.com/ingest",
    auth_type="basic",
    auth_value="username:password",
)

# With custom header auth
arzule_ingest.init(
    mode="selfhosted",
    endpoint="https://arzule.internal.company.com/ingest",
    auth_type="header",
    auth_value="X-Custom-Auth:secret_value",
)
```

#### Multi Mode

Send traces to multiple destinations simultaneously:

```python
import arzule_ingest

arzule_ingest.init(
    mode="multi",
    destinations=[
        {
            "type": "cloud",
            "api_key": "arz_production_key",
        },
        {
            "type": "local",
            "output_path": "./backup_traces.jsonl",
        },
        {
            "type": "selfhosted",
            "endpoint": "https://arzule.internal.company.com/ingest",
            "auth_type": "bearer",
            "auth_value": "internal_token",
        },
    ],
    redact_secrets=True,  # Applies to all destinations
)
```

### `ArzuleRun`

Context manager for manual run control:

```python
from arzule_ingest import ArzuleRun
from arzule_ingest.sinks import JsonlFileSink

with ArzuleRun(
    tenant_id="...",
    project_id="...",
    sink=JsonlFileSink("traces.jsonl")
) as run:
    # Your agent code here
    print(f"Run ID: {run.run_id}")
```

## Sinks

Sinks determine where trace events are sent:

| Sink | Purpose |
|------|---------|
| `HttpBatchSink` | Send to Arzule cloud (default) |
| `JsonlFileSink` | Write to local JSONL file |
| `CompositeSink` | Send to multiple destinations |

```python
from arzule_ingest.sinks import JsonlFileSink, HttpBatchSink, CompositeSink

# Local file
file_sink = JsonlFileSink("traces.jsonl")

# Remote endpoint
http_sink = HttpBatchSink(
    endpoint_url="https://ingest.arzule.com",
    api_key="..."
)

# Both at once
multi_sink = CompositeSink([file_sink, http_sink])
```

## Framework integrations

### CrewAI

```python
from arzule_ingest.crewai import instrument_crewai

# Call once at startup
instrument_crewai()
```

Or use the automatic approach:

```python
import arzule_ingest
arzule_ingest.init()  # Auto-detects and instruments CrewAI
```

## CLI

The SDK includes a command-line tool:

```bash
# View traces
arzule view traces.jsonl

# Show statistics
arzule stats traces.jsonl
```

## Module structure

```
arzule_ingest/
├── __init__.py      # init(), version
├── run.py           # ArzuleRun context manager
├── mode.py          # Deployment mode configuration
├── sinks/           # Output destinations
│   ├── base.py      # BaseSink interface
│   ├── http.py      # HttpBatchSink
│   ├── jsonl.py     # JsonlFileSink
│   └── composite.py # CompositeSink
├── server/          # Self-hosted backend server
│   ├── __init__.py  # Server initialization
│   ├── app.py       # FastAPI application
│   ├── routes.py    # Ingest API routes
│   └── storage.py   # Pluggable storage backends
├── crewai/          # CrewAI integration
│   └── normalize.py # Event normalization
├── redaction.py     # PII redaction
├── ids.py           # ID generation
└── cli.py           # Command-line interface
```

## Next steps

<CardGroup cols={2}>

<Card title="ArzuleRun" icon="play" href="/sdk/python/arzule-run">
  Detailed API reference for run management.
</Card>

<Card title="Sinks" icon="database" href="/sdk/python/sinks">
  Configure where traces are sent.
</Card>

<Card title="CLI" icon="terminal" href="/sdk/python/cli">
  Command-line tools reference.
</Card>

<Card title="Quickstart" icon="rocket" href="/quickstart">
  Get started in 5 minutes.
</Card>

</CardGroup>

